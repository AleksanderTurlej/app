{% extends 'base.html.twig' %}

{% block title %}{{'Medicine index'|trans}}{% endblock %}

{% block body %}
    <h1>{{'Medicines'|trans}}</h1>

    <div>

        <form method="GET">

            <input type="text" name="name">
            <button>
                {{ 'search' | trans }}
            </button>

            <div class="btn-group btn-group-toggle" data-toggle="buttons">

                <label class="btn btn-secondary">
                    <input type="radio" name="searchBy" value="1"> {{ 'Diesase' |trans}}
                </label>
                <label class="btn btn-secondary">
                    <input type="radio" name="searchBy" value="2"> {{ 'Medicine' |trans}}
                </label>
            </div>
        </form>

    </div>

    <table class="table">
        <thead>
            <tr>
                <th>{{ knp_pagination_sortable(medicines, 'Id'|trans, 'm.id') }}</th>
                <th>{{ knp_pagination_sortable(medicines, 'Name'|trans, 'm.name') }}</th>
                <th>{{'Disease'|trans}}</th>
                <th>{{ knp_pagination_sortable(medicines, 'Price'|trans, 'm.price') }}</th>
                <th>{{ knp_pagination_sortable(medicines, 'Weight'|trans, 'm.weight') }}</th>
                <th>{{'IsRecipeRequired'|trans}}</th>
                {% if app.user is defined and is_granted('ROLE_ADMIN') %}
                <th>{{'actions'|trans}}</th>
                {% endif %}
                <th>{{'Favourites'|trans}}</th>
                <th>{{'Opinions'|trans}}</th>


            </tr>
        </thead>
        <tbody>
        {% for medicine in medicines %}
            <tr>
                <td>{{ medicine.id }}</td>
                <td>
                    <a href="{{ path('medicine_show', {'id': medicine.id}) }}">{{ medicine.name }}</a>
                </td>
                <td>
                {% for med in medicine.diseases %}
                    <li>{{ med.name }}</li>
                {% endfor %}
                </td>
                <td>{{ medicine.price }}</td>
                <td>{{ medicine.weight }}</td>
                <td>{{ medicine.isRecipeRequired ? 'Yes'|trans : 'No'|trans }}</td>
                <td>
                    <a href="{{ path('favourites_new', {'id': medicine.id}) }}">{{'add to favourites'|trans}}</a>

                </td>
                <td>
                    <a href="{{ path('opinion_new', {'id': medicine.id}) }}">{{'add opinion'|trans}}</a>

                </td>
                <td>
                    {% if app.user is defined and is_granted('ROLE_ADMIN') %}
                    <a href="{{ path('medicine_show', {'id': medicine.id}) }}">{{'show'|trans}}</a>
                    <a href="{{ path('medicine_edit', {'id': medicine.id}) }}">{{'edit'|trans}}</a>
                    {% endif %}

                </td>

            </tr>
        {% else %}
            <tr>
                <td colspan="6">{{'no records found'|trans}}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>



    <div class="navigation">
        {{ knp_pagination_render(medicines) }}
    </div>
    {% if app.user is defined and is_granted('ROLE_ADMIN') %}
    <a href="{{ path('medicine_new') }}">{{'Create new'|trans}}</a>

    {% endif %}

{% endblock %}
