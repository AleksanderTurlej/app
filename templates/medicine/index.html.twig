{% extends 'base.html.twig' %}

{% block title %}Medicine index{% endblock %}

{% block body %}
    <h1>Medicines</h1>

    <div>

        <form method="GET">

            <input type="text" name="name">
            <button>
                {{ 'search' | trans }}
            </button>

            <div class="btn-group btn-group-toggle" data-toggle="buttons">

                <label class="btn btn-secondary">
                    <input type="radio" name="searchBy" value="1"> Diesase
                </label>
                <label class="btn btn-secondary">
                    <input type="radio" name="searchBy" value="2"> Medicine
                </label>
            </div>
        </form>

    </div>

    <table class="table">
        <thead>
            <tr>
                <th>{{ knp_pagination_sortable(medicines, 'Id', 'm.id') }}</th>
                <th>{{ knp_pagination_sortable(medicines, 'Name', 'm.name') }}</th>
                <th>Disease</th>
                <th>{{ knp_pagination_sortable(medicines, 'Price', 'm.price') }}</th>
                <th>{{ knp_pagination_sortable(medicines, 'Weight', 'm.weight') }}</th>
                <th>IsRecipeRequired</th>
                {% if app.user is defined and is_granted('ROLE_ADMIN') %}
                <th>actions</th>
                {% endif %}

            </tr>
        </thead>
        <tbody>
        {% for medicine in medicines %}
            <tr>
                <td>{{ medicine.id }}</td>
                <td>
                    <a href="{{ path('medicine_show', {'id': medicine.id}) }}">{{ medicine.name }}</a>
                </td>
                <td>
                {% for med in medicine.diseases %}
                    <li>{{ med.name }}</li>
                {% endfor %}
                </td>
                <td>{{ medicine.price }}</td>
                <td>{{ medicine.weight }}</td>
                <td>{{ medicine.isRecipeRequired ? 'Yes' : 'No' }}</td>
                <td>
                    {% if app.user is defined and is_granted('ROLE_ADMIN') %}
                    <a href="{{ path('medicine_show', {'id': medicine.id}) }}">show</a>
                    <a href="{{ path('medicine_edit', {'id': medicine.id}) }}">edit</a>
                    {% endif %}

                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>



    <div class="navigation">
        {{ knp_pagination_render(medicines) }}
    </div>
    {% if app.user is defined and is_granted('ROLE_ADMIN') %}
    <a href="{{ path('medicine_new') }}">Create new</a>

    {% endif %}

{% endblock %}
